# 📜 CHANGELOG

Lịch sử các phiên bản phần mềm **Quản Lý Cầm Đồ**.


---

## [1.2.5] – 2025-07-03  
### 🎯 Cải thiện quản lý hợp đồng & lịch sử đóng lãi

- 📢 **Cảnh báo rõ ràng** khi click vào hợp đồng đã bị xóa – không còn lỗi truy vấn cơ sở dữ liệu  
- 🧹 **Sửa bộ lọc** hiển thị chính xác các hợp đồng có trạng thái `Đã chuộc`, `Đã chuộc sớm`  
- 🎨 **Bổ sung màu sắc cho bảng Lịch sử đóng lãi**:
  - 🔴 **Đỏ**: Quá hạn / Tới hạn hôm nay (chưa đóng)
  - 🟢 **Xanh nhạt**: Tới hạn hôm nay đã đóng / Đang vay
  - 🟡 **Vàng**: Sắp tới hạn
  - ⚪ **Xám nhạt**: Đã đóng tất cả các kỳ
  - ⚫ **Xám đậm**: Hợp đồng đã chuộc / Chuộc sớm  
- 🖼️ **Thêm icon minh họa** cho từng dòng trong bảng lịch sử đóng lãi → giúp dễ phân biệt và nổi bật thông tin hơn  
- 📅 **Thêm cột "Tổng thời gian vay (ngày)"** trong bảng lịch sử hợp đồng – thuận tiện cho việc thống kê và đánh giá thời gian vay thực tế  
- 🔁 **Tự động reload form lịch sử đóng lãi** sau khi chuộc hoặc gia hạn, thay vì yêu cầu tắt mở lại  
- 🚫 **Ngăn không cho phép gia hạn** nếu hợp đồng đã hoàn tất toàn bộ kỳ (hiển thị cảnh báo “Không thể tìm thấy kỳ gia hạn”)

> ✅ Đây là bản cập nhật tuy nhỏ nhưng **tối ưu đáng kể trải nghiệm người dùng**, khắc phục các vấn đề hiển thị & thao tác, đồng thời cải tiến độ rõ ràng và kiểm soát luồng hoạt động của phần mềm.

---

## [1.2.4] - 2025-07-02
### 🔍 Tìm kiếm thông minh & tự động hóa kỳ lãi
- 🔁 **Tự động tạo kỳ lãi đầu tiên** ngay khi thêm hoặc sửa hợp đồng (giúp dễ theo dõi và thu lãi từ ngày đầu)
- 🔎 **Tìm kiếm không dấu** theo tên khách hàng (chỉ cần nhập một từ bất kỳ, ví dụ: "khoa" → ra "Việt Khoa")
- ☁️ **Kiểm tra phiên bản phần mềm online** nếu có kết nối mạng
- 🗃️ **Tự cập nhật cơ sở dữ liệu** (nếu phát hiện bản cũ) mà không làm mất dữ liệu
- 🧪 Cải tiến xử lý logic tính ngày, đảm bảo kỳ đầu luôn khớp với ngày vay hoặc gần nhất

> Bản nâng cấp nhỏ nhưng quan trọng, hỗ trợ thao tác mượt hơn, tìm kiếm tiện hơn và đảm bảo dữ liệu luôn nhất quán.

---

## [1.2.2] - 2025-07-01
### 🧾 Cập nhật in hợp đồng & lịch sử đóng lãi
- 📝 **Sửa lỗi đọc số tiền bằng chữ**:
  - Chuẩn hóa cú pháp tiếng Việt (bỏ đoạn "không trăm lẻ..." không tự nhiên)
- 📅 **Cập nhật thông tin in lịch sử**:
  - Hiển thị **ngày bắt đầu** và **ngày kết thúc** đóng lãi đúng định dạng `dd/MM/yyyy`
- 📂 In PDF lưu vào thư mục `Print/HopDong` và `Print/LichSu`

---

## [1.2.1] - 2025-07-01
### 🔧 Cập nhật nhỏ nhưng quan trọng
- ✅ Cải tiến thống kê:
  - Tổng hợp **số hợp đồng đang vay**, **tổng tiền cho vay**, và **lãi đã thu trong tháng** chính xác theo thời gian thực
- 🖨️ Cập nhật giao diện in PDF (QuestPDF):
  - Căn chỉnh lại mẫu in lịch sử & hợp đồng sát với bản mẫu thực tế
  - Cải thiện bố cục rõ ràng, gọn gàng
- 💄 Cải thiện giao diện nhẹ: tinh chỉnh một số chi tiết font và canh lề

> Đây là bản nâng cấp nhẹ sau phiên bản ổn định 1.1, tập trung vào độ chính xác và trải nghiệm in ấn chuyên nghiệp.

---

## [1.1] - 2025-06-30
### ✨ Phiên bản chính thức đầu tiên (ổn định)
- Giao diện hiện đại, font Montserrat, bố cục rõ ràng
- Quản lý hợp đồng vay: thêm, sửa
- Tính lãi từng kỳ, hiển thị số ngày chưa đóng
- Lịch sử đóng lãi từng kỳ, hỗ trợ gia hạn
- Tìm kiếm hợp đồng theo tên, mã, ngày vay; có phân trang
- Quản lý tình trạng hợp đồng: Đang vay, Sắp tới hạn, Quá hạn, Tất toán, v.v.
- In hợp đồng và lịch sử đóng lãi từ mẫu Word hoặc PDF (QuestPDF)
- Bảo vệ bằng key bản quyền vĩnh viễn (dựa trên HWID)
- Hiển thị thống kê nhanh: số hợp đồng đang vay, tổng tiền cho vay, lãi đã thu trong tháng
- Tự động tính lãi đến hôm nay để hỗ trợ chuộc nhanh

---

## [1.0] - 2025-06-15
### 🧪 Phiên bản thử nghiệm nội bộ
- Cơ bản tạo & lưu hợp đồng bằng SQLite
- Giao diện sơ khởi chưa chuẩn hóa layout
- Có tính năng tính lãi theo kỳ
- In hợp đồng bằng mẫu Word
- Chưa có kiểm soát bản quyền hoặc trạng thái hợp đồng
- Chưa hỗ trợ phân trang, tìm kiếm

